---
layout: post
title: "如何阅读开源项目的源代码"
categories: experience 
---
> 阅读优秀开源项目的源码对于码农来讲，是一个提升自己的绝好途径；在阿里，牛人备出，他们在这方面肯定很有经验，不过我在ATA上居然没搜索到分享如何阅读源码的文章；因为本人阅读源码真的不多，所以想抛砖引玉一下！

# 一些思路
+ 选择自己感兴趣的topic，然后再选择一个开源项目来学习其源码
  兴趣是最好的老师，学习一个自己感兴趣的开源项目，效果上往往会好很多，否则你可能坚持不下去
+ 学习别人的代码，在某种意义上，就是一种反向工程
  比如我们写代码的时候，你可能先做需求分析，抽取一些名词，动词，建模，然后再作系统架构等等；然后你会发现，你去读别人的代码的时候，其实就是上面这些动作的反向工程
+ 理解开源项目的产生背景，目标
  当然，我们读开源项目的时候，一定要先搞清楚这个项目的产生背景，意义及目标等，和代码虽然没有太大关联，但和你读懂代码，读懂作者的思想，是息息相关的。
  如果你能根据这些背景，试着去想一下，如果是你，你会怎么做，那就更好了，最好在整个过程中，一直保持这种状态（如果我来设计应该怎么设计，作者为什么这样设计）
+ 先理清楚读这个开源项目所要具备的硬件基础
  假设你现在要读netty源码，如果你不懂NIO，那源码之旅就无从谈起了；当然还有几种IO模型，事件驱动架构，reactor及proactor等等概念要去先行了解，后面的源码之旅才能顺畅；
  当然，在开始阅读源码前，你只要理清楚那些硬性的基础，其实在你阅读的过程，你也会发现还有一些基础是你需要掌握的，但这些基础没提前准备，也是不要紧的，对整个源码阅读过程是无伤大雅的。
  总之，你要记住，不是说，“啊，今天我要读源码了，你就能读这个源码了”，读源码需要有一定的步骤，一定的计划，还要有一定的基础。
+ 理解其架构，思想，关注大局为首要任务
  一般地，我们先需要从宏观上了解一下项目，它的架构或结构，比如netty官网上的netty架构图，这种最好多看几遍，争取把作者的架构变成“你的架构”，这对后面你去理解作者的思想，是非常有帮助的，因为整个阅读源码的过程，你都要时刻揣摩作者的意思或意图。
  记住，先别急着去了解代码细节，首要的是，要先了解架构，项目结构，模块间关系等等。
+ 阅读其文档
  一般优秀的开源项目都有文档，比如UserGuide，这么好的资料不可不读；
  当然你也可以从Google、slideshare等等上找一些相关的资料
+ 先使用它，然后再剖析它
  阅读源码之前，最好是能使用它，能让它跑起来，能对整个产品或项目有个了解，后面调试也方便；
  资料中有可能带有例子，还有源码中的单元测试代码，这都是绝佳的让你亲身体验的机会；
+ 搭建一个可运行的环境，然后调试
  调试对了解一个系统（包括开源系统）非常有帮助，所以你必须尽可能先去搭建一个可运行的环境
+ 当然，最重要的是，你能坚持，而且连贯
  阅读源码有时候可能会觉得枯燥，所以我一开始就说了要选择自己感兴趣的，一定要坚持下去，坚持就是胜利；当然还有很多人是享受这个过程的，
  很多时候你可能想，今天先打把dota玩把星际吧，然后隔了几天再去看源码，发现线程切换开销有点大，所以在你对作者的思想还没完全把握的时候，尽量的做到连贯的阅读
+ 并且要时常做些笔记（画图），心得
  一个好的习惯是，在阅读源码的时候，时常做些笔记，把有疑问的地方记下来，把从源码中学习到或领悟到的记下来等等；画些草图，时常思考，记下自己的心得体会
+ 边读边加上注释
  另一个我认为不错的方法是，在源码上加上自己的理解（注释）
+ 善用工具
  工具有时候能起到事半功倍的效果，比如intellij idea，shell，ctags等等
+ 找到切入点
  如果开源项目是c、c++写的，可以先从main函数着手，一层层剥下去；
  调试单元测试代码也是一个不错的切入点
+ 不同领域的源码，读法可能也不一样
+ 如果一个项目非常大，我看有些同学就想出了源码阅读的活动，大家分工阅读，也不失为一种好方法
+ apache的顶级项目，是我们宝贵的知识库，多读大有裨益
+ 如果身边有大神，记得请教

# 总结
  现在我一周会抽出几天时间来进行健身，目前还只是瞎练的阶段，但已经从不知道自己是瞎练到已经知道自己是瞎练，随着不断的思考与学习（他人的锻炼习惯与练习器械的姿势），应该会慢慢变好，最后会形成自己的一套方法；
  其实阅读源码也一样，一开始的时候可能是瞎看，摸不着门道，但随着你的坚持，你的思考，你的学习，你会慢慢形成自己的一套阅读源码的方法。
  上面可能有说的不对的地方，还望指正；我目前所能想到的只有这些，但一个人的思考毕竟有限，希望大家能补充一下自己在这方面的心得体会，在此谢过！
